# Auth0 Mock Server

This is an Express.js server that dynamically generates JWT tokens for user authentication based on
the properties passed in the request body. It serves as a mock server for Auth0 authentication,
making testing with Cypress easier.

## Prerequisites

Before running the server, ensure you have the following installed:

- Node.js
- npm (Node Package Manager)

## Installation

Install dependencies:

```bash
npm install
```

## Usage

### Generate JWKS (JSON Web Key Set)

The server automatically generates a JSON Web Key Set (JWKS) at startup. This JWKS is available at
`/.well-known/jwks.json`.

### Start the Server

To start the server, run:

```bash
npm start
```

By default, the server will listen on port 3000. You can specify a different port using the PORT
environment variable:

```bash
PORT=5000 npm start
```

## Endpoints

1. **GET /.well-known/jwks.json**

   Returns the JSON Web Key Set (JWKS) used for JWT token signing.


2. **POST /oauth/token**

   Generates a JWT access token based on the provided user credentials and any additional properties
   passed in the request body.

* **Method**: POST
* **Headers**: Content-Type: application/json
* **Body**: JSON object containing user credentials (e.g., username, password) and additional
  properties
* **Response**: JSON object containing the dynamically generated access token

## Dynamic Token Generation

The JWT access token generated by the server is dynamic and includes any additional properties
passed in the request body. This allows for flexibility in customizing the token payload based on
application requirements.

### Example Usage

Assuming the server is running locally on port 3000:

``` bash
Copy code
curl -X POST \
-H "Content-Type: application/json" \
-d '{"user_id": 1, "company_id": 183, "authorities": ["READ", "WRITE"]}' \
http://localhost:3000/oauth/token
```

In this example, the JWT token will include the properties (user_id, company_id, authorities) in the
payload.